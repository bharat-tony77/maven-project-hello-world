pipeline {
    agent any
    stages {
        stage("build") {
            steps{
                sh "mvn clean install"
            }
        }
        stage("Infra_provisioning") {
            steps{
                sh "terraform init"
                sh "terraform plan"
                sh "terraform apply -auto-approve"
            }
        }
        stage("post_build") {
            steps{
                
                echo 'Deploy docker images to target server'
            }
        }
    }
}
